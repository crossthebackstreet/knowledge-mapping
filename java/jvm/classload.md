Java类加载机制
什么是类加载机制？
虚拟机把描述类的数据从Class文件加载到内存，并对数据进行连接、初始化，最终形成可以被虚拟机直接使用的Java类型，这个过程称为类加载机制。
类在内存中的的生命周期包括加载、连接、初始化、使用、卸载几个阶段，其中连接阶段包括验证、准备、解析三个部分。
类的加载过程包括加载、验证、准备、解析、初始化五个阶段，其中加载、验证、准备、初始化四个阶段是相对有序的，这些阶段通常是相互交叉进行的。解析阶段可能发生在初始化之前也可能发生在初始化之后，这是为了支持Java运行时绑定，也可以成为动态绑定或者晚期绑定。
1. 加载
加载阶段的主要工作是将字节码加载到内存中。加载阶段虚拟机要完成三件事情。
* 通过一个类的全限定名获取这个类的字节流
* 将字节流所代表的静态存储结构转化为方法区的运行时数据结构
* 在内存中生成一个代表这个二进制字节流的java.lang.Class对象，通过这个Class对象来访问方法区中这个类中的数据
2. 验证
验证阶段的目的是为了保证class文件中字节流包含的信息符合虚拟机的要求，不会危害虚拟机的安全。验证阶段包括四部分：
* 文件格式验证
* 元数据验证
* 字节码验证
* 符号引用验证
3. 准备
准备阶段的主要工作是在方法区中为类变量分配内存，并为类变量设置默认的初始化值。
准备阶段只为类变量分配内存，不包括被final修饰类变量，实例变量会在对象实例化时随着对象一起在堆中分配内存。类变量的初始化值为默认零值，为类变量赋值的putstatic指令发生在初始化阶段，类构造器<clinit>方法执行时会对类变量进行初始化。
4. 解析
5. 初始化


动态绑定、静态绑定
绑定是把方法与方法所在的类进行关联。
静态绑定，也称为前期绑定，在程序编译期完成绑定，Java中的方法只有final、static、private修饰的方法和构造方法是前期绑定的。
动态绑定，也称为后期绑定，运行时根据具体的实例对象进行绑定。

类初始化发生的条件